<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="nav/nav.css">
  <link rel="stylesheet" href="food.css">
  <title>Document</title>
  <script>
    // window.addEventListener('DOMContentLoaded', () => {
    //   // ... your existing code ...
    //   fetch('nav/nav.html')
    //     .then(response => response.text())
    //     .then(html => {
    //       document.querySelector('nav').innerHTML = html;
    //     });
    // });


    function increaseQuantity(selector) {
    const quantitySpan = document.querySelector(selector + "-quantity");
    const currentQuantity = parseInt(quantitySpan.textContent);
    quantitySpan.textContent = currentQuantity + 1;
    // Call this function when the page loads to update the button text
updateNextButton();
}

function decreaseQuantity(selector) {
    const quantitySpan = document.querySelector(selector + "-quantity");
    const currentQuantity = parseInt(quantitySpan.textContent);
    
    if (currentQuantity > 0) {
        quantitySpan.textContent = currentQuantity - 1;
    }
    // Call this function when the page loads to update the button text
updateNextButton();
}

function navigateToFood() {
        // Store the selected food and drink quantities in localStorage
        const selectedFoodQuantity = parseInt(document.querySelector('.food-quantity').textContent);
        const selectedDrinkQuantity = parseInt(document.querySelector('.drink-quantity').textContent);
        localStorage.setItem('selectedFoodQuantity', selectedFoodQuantity);
        localStorage.setItem('selectedDrinkQuantity', selectedDrinkQuantity);

        // Redirect to pay.html
        window.location.href = 'pay.html';
    }

function calculateTotal() {
    const foodQuantity = parseInt(document.querySelector('.food-quantity').textContent);
    const drinkQuantity = parseInt(document.querySelector('.drink-quantity').textContent);
    
    const foodPrice = 8; // Price per popcorn
    const drinkPrice = 6; // Price per drink
    
    const total = (foodQuantity * foodPrice) + (drinkQuantity * drinkPrice);
    return total;
}

function updateNextButton() {
    const foodQuantity = parseInt(document.querySelector('.food-quantity').textContent);
    const drinkQuantity = parseInt(document.querySelector('.drink-quantity').textContent);
    const total = calculateTotal();
    const totalItems = foodQuantity + drinkQuantity;

    if (totalItems === 0) {
        const nextButton = document.querySelector('.seat-button');
        nextButton.textContent = 'NEXT';
    } else {
        const itemText = totalItems === 1 ? 'item' : 'items';
        const nextButton = document.querySelector('.seat-button');
        nextButton.textContent = `Total - ${totalItems} ${itemText} RM ${total}`;
    }
}









  </script>
</head>

<body>
  <nav>
    <div class="left">
      <a href="">
        <img class="logo" src="component/logo.png" alt="">
      </a>
      <ul>
        <li><a href="">Movies</a></li>
        <li><a href="">About</a></li>

      </ul>
    </div>

    <div class="right">
      <a href="signIn.html">
        <div class="signIn">SIGN IN</div>
      </a>
      <div><a href="">
          <img class="search" src="component/search.png" alt="">
        </a></div>
    </div>
  </nav>

  <section class="flowBox">
    <div class="flowOrder">
      <div class="status"> &#x2713;</div>
      <div class="text">
        <h5>Login</h5>
      </div>
    </div>
    <div class="line">
      <hr>
    </div>
    <div class="flowOrder">
      <div class="status"> &#x2713;</div>
      <div class="text">
        <h5>Select</h5>
      </div>
    </div>
    <div class="line">
      <hr>
    </div>
    <div class="flowOrder">
      <div class="status">&#x2713;</div>
      <div class="text">
        <h5>Seat</h5>
      </div>
    </div>
    <div class="line">
      <hr>
    </div>
    <div class="flowOrder">
      <div class="status">4</div>
      <div class="text">
        <h5>food</h5>
      </div>
    </div>

    <div class="line">
      <hr>
    </div>
    <div class="flowOrder">
      <div class="status">5</div>
      <div class="text">
        <h5>Pay</h5>
      </div>
    </div>

    <div class="line">
      <hr>
    </div>
    <div class="flowOrder">
      <div class="status">6</div>
      <div class="text">
        <h5>Receipt</h5>
      </div>
    </div>

  </section>




  <section class="food">
    <a href="seat.html">
        <button class="return">
            <img src="component/return.png" alt="">
        </button>
    </a>
    <div class="wrap-food">
        <div class="container-food">
            <img src="component/pocorn.png" alt="">
            <div class="title-food">Popcorn RM 8</div>
            <div class="qty-food">
                <button class="minus" onclick="decreaseQuantity('.food')">-</button>
                <span class="food-quantity">0</span>
                <button class="plus" onclick="increaseQuantity('.food')">+</button>
            </div>
        </div>

        <div class="container-food">
            <img src="component/drink.png" alt="">
            <div class="title-food">Drink RM 6</div>
            <div class="qty-food">
                <button class="minus" onclick="decreaseQuantity('.drink')">-</button>
                <span class="drink-quantity">0</span>
                <button class="plus" onclick="increaseQuantity('.drink')">+</button>
            </div>
        </div>
    </div>
</section>

<button class="seat-button" onclick="navigateToFood()">NEXT</button>


</body>

</html>